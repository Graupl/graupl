// @gruapl/graupl menu component styles.

@use "defaults";
@use "variables" as *;
@use "../../defaults" as root-defaults;
@use "../../base/button/defaults" as button-defaults;
@use "../../mixins/layer" as *;
@use "../../mixins/media-queries" as *;

@include layer(component) {
  #{defaults.$menu-selector} {
    --#{root-defaults.$prefix}-link-text-decoration: #{$menu-link-text-decoration};
    --#{root-defaults.$prefix}-link-text-decoration-thickness: #{$menu-link-text-decoration-thickness};
    --#{root-defaults.$prefix}-link-hover-text-decoration: #{$menu-link-hover-text-decoration};
    --#{root-defaults.$prefix}-link-hover-text-decoration-thickness: #{$menu-link-hover-text-decoration-thickness};
    --#{root-defaults.$prefix}-link-padding: #{$menu-link-padding};
    --#{root-defaults.$prefix}-link-transform: #{$menu-link-transform};
    --#{root-defaults.$prefix}-link-hover-transform: #{$menu-link-hover-transform};
    --#{root-defaults.$prefix}-link-active-transform: #{$menu-link-active-transform};
    --#{root-defaults.$prefix}-link-hover-transform-reduced-motion: #{$menu-link-hover-transform-reduced-motion};
    --#{root-defaults.$prefix}-link-active-transform-reduced-motion: #{$menu-link-active-transform-reduced-motion};
    --#{root-defaults.$prefix}-button-padding: #{$menu-link-padding};

    display: $menu-display;
    flex-flow: $menu-flex-direction wrap;
    align-items: center;
    margin: 0;
    padding: 0;
    background: $menu-background;
    color: $menu-color;
    list-style: none;
    gap: $menu-gap;
    isolation: isolate;

    #{defaults.$menu-link-selector}:not(#{button-defaults.$button-selector}),
    #{button-defaults.$button-selector}#{button-defaults.$button-link-selector} {
      padding: $menu-link-padding;
      transform: $menu-link-transform;
      transition: $menu-link-transition;
      border-width: $menu-link-border-width;
      border-style: $menu-link-border-style;
      border-radius: $menu-link-border-radius;
      text-decoration: $menu-link-text-decoration;
      text-decoration-thickness: $menu-link-text-decoration-thickness;

      &:hover {
        --#{root-defaults.$prefix}-menu-link-transform: #{$menu-link-hover-transform};
      }

      &:active {
        --#{root-defaults.$prefix}-menu-link-transform: #{$menu-link-active-transform};
      }
    }

    #{defaults.$menu-link-selector},
    #{button-defaults.$button-selector} {
      display: flex;
      flex: 1 1;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      gap: $menu-link-gap;
    }
  }

  #{defaults.$submenu-selector} {
    --#{root-defaults.$prefix}-menu-flex-direction: #{$submenu-flex-direction};
    --#{root-defaults.$prefix}-menu-link-padding: #{$submenu-link-padding};

    display: $submenu-display;
    position: $submenu-position;
    z-index: $submenu-z-index;
    min-width: max-content;
    border-width: $submenu-border-width;
    border-style: $submenu-border-style;
    border-radius: $submenu-border-radius;
    background: $submenu-background;
    color: $submenu-color;
    gap: $submenu-gap;
    inset: $submenu-inset;

    &#{defaults.$menu-show-selector} {
      --#{root-defaults.$prefix}-submenu-display: #{$submenu-show-display};
    }

    &#{defaults.$menu-hide-selector} {
      --#{root-defaults.$prefix}-submenu-display: #{$submenu-hide-display};
    }

    #{defaults.$menu-item-selector} {
      --#{root-defaults.$prefix}-menu-item-width: #{$submenu-item-width};
    }
  }

  #{defaults.$menu-item-selector} {
    position: relative;
    width: $menu-item-width;
  }

  #{defaults.$submenu-toggle-selector} {
    &::after {
      content: "â–¼";
      transform: none;
      transition: transform 200ms ease;
    }

    &[aria-expanded="true"]::after {
      transform: rotate(-180deg);
    }
  }
}

@include layer(theme) {
  #{defaults.$menu-selector} {
    --#{root-defaults.$prefix}-link-color: #{$menu-link-color};
    --#{root-defaults.$prefix}-link-hover-color: #{$menu-link-hover-color};
    --#{root-defaults.$prefix}-link-active-color: #{$menu-link-active-color};
    --#{root-defaults.$prefix}-link-visited-color: #{$menu-link-visited-color};
    --#{root-defaults.$prefix}-link-disabled-color: #{$menu-link-disabled-color};
    --#{root-defaults.$prefix}-link-background: #{$menu-link-background};
    --#{root-defaults.$prefix}-link-hover-background: #{$menu-link-hover-background};
    --#{root-defaults.$prefix}-link-active-background: #{$menu-link-active-background};
    --#{root-defaults.$prefix}-link-visited-background: #{$menu-link-visited-background};
    --#{root-defaults.$prefix}-link-disabled-background: #{$menu-link-disabled-background};
    --#{root-defaults.$prefix}-button-color: #{$menu-link-color};
    --#{root-defaults.$prefix}-button-hover-color: #{$menu-link-hover-color};
    --#{root-defaults.$prefix}-button-active-color: #{$menu-link-active-color};
    --#{root-defaults.$prefix}-button-disabled-color: #{$menu-link-disabled-color};
    --#{root-defaults.$prefix}-button-background: #{$menu-link-background};
    --#{root-defaults.$prefix}-button-hover-background: #{$menu-link-hover-background};
    --#{root-defaults.$prefix}-button-active-background: #{$menu-link-active-background};
    --#{root-defaults.$prefix}-button-disabled-background: #{$menu-link-disabled-background};

    #{defaults.$menu-link-selector}:not(#{button-defaults.$button-selector}),
    #{button-defaults.$button-selector}#{button-defaults.$button-link-selector} {
      background: $menu-link-background;
      color: $menu-link-color;

      &:visited {
        --#{root-defaults.$prefix}-menu-link-background: #{$menu-link-visited-background};
        --#{root-defaults.$prefix}-menu-link-color: #{$menu-link-visited-color};
      }

      &:hover {
        --#{root-defaults.$prefix}-menu-link-color: #{$menu-link-hover-color};
        --#{root-defaults.$prefix}-menu-link-background: #{$menu-link-hover-background};
      }

      &:active {
        --#{root-defaults.$prefix}-menu-link-color: #{$menu-link-active-color};
        --#{root-defaults.$prefix}-menu-link-background: #{$menu-link-active-background};
      }

      &:disabled,
      &[disabled] {
        &,
        &:hover,
        &:active {
          --#{root-defaults.$prefix}-menu-link-color: #{$menu-link-disabled-color};
          --#{root-defaults.$prefix}-menu-link-background: #{$menu-link-disabled-background};
        }
      }
    }
  }

  #{defaults.$submenu-selector} {
    --#{root-defaults.$prefix}-menu-link-color: #{$submenu-link-color};
    --#{root-defaults.$prefix}-menu-link-hover-color: #{$submenu-link-hover-color};
    --#{root-defaults.$prefix}-menu-link-active-color: #{$submenu-link-active-color};
    --#{root-defaults.$prefix}-menu-link-visited-color: #{$submenu-link-visited-color};
    --#{root-defaults.$prefix}-menu-link-disabled-color: #{$submenu-link-disabled-color};
    --#{root-defaults.$prefix}-menu-link-background: #{$submenu-link-background};
    --#{root-defaults.$prefix}-menu-link-hover-background: #{$submenu-link-hover-background};
    --#{root-defaults.$prefix}-menu-link-active-background: #{$submenu-link-active-background};
    --#{root-defaults.$prefix}-menu-link-visited-background: #{$submenu-link-visited-background};
    --#{root-defaults.$prefix}-menu-link-disabled-background: #{$submenu-link-disabled-background};

    border-color: $submenu-border-color;
  }
}

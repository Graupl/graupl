// @gruapl/graupl card component styles.

@use "defaults";
@use "variables" as *;
@use "../../defaults" as root-defaults;
@use "../../mixins/layer" as *;
@use "../../mixins/media-queries" as *;

@include layer(component) {
  #{defaults.$card-selector} {
    display: grid;
    position: relative;
    grid-template-areas:
      "image"
      "content";
    grid-template-rows: $card-image-ratio $card-content-ratio;
    padding: $card-padding;
    border: $card-border;
    border-radius: $card-border-radius;
    gap: $card-gap;
    isolation: isolate;

    &#{defaults.$card-horizontal-selector} {
      &,
      &#{defaults.$card-horizontal-left-selector} {
        --#{root-defaults.$prefix}-card-image-ratio: 2fr;
        --#{root-defaults.$prefix}-card-content-ratio: 3fr;

        grid-template: "image content" auto / $card-image-ratio $card-content-ratio;

        #{defaults.$card-image-selector} img {
          border-radius: calc($card-top-left-border-radius - $card-border-width)
            0 0 calc($card-bottom-left-border-radius - $card-border-width);
        }
      }

      &#{defaults.$card-horizontal-right-selector} {
        grid-template-areas: "content image";
        grid-template-columns: $card-content-ratio $card-image-ratio;

        #{defaults.$card-image-selector} img {
          border-radius: 0
            calc($card-top-right-border-radius - $card-border-width)
            calc($card-bottom-right-border-radius - $card-border-width) 0;
        }
      }
    }
  }

  #{defaults.$card-image-selector} {
    grid-area: image;
    padding: $card-image-padding;

    img {
      width: 100%;
      height: 100%;
      border-radius: calc($card-top-left-border-radius - $card-border-width)
        calc($card-top-right-border-radius - $card-border-width) 0 0;
      object-fit: cover;
    }
  }

  #{defaults.$card-content-selector} {
    display: flex;
    grid-area: content;
    flex-direction: column;
    padding: $card-content-padding;
    gap: $card-content-gap;
  }

  #{defaults.$card-body-selector} {
    flex: 1 0 auto;
  }

  @include screen-trigger(force-vertical-card) {
    #{defaults.$card-selector} {
      &#{defaults.$card-horizontal-selector} {
        &,
        &#{defaults.$card-horizontal-left-selector},
        &#{defaults.$card-horizontal-right-selector} {
          --#{root-defaults.$prefix}-card-image-ratio: #{defaults.$card-image-ratio};
          --#{root-defaults.$prefix}-card-content-ratio: #{defaults.$card-content-ratio};

          grid-template: "image" $card-image-ratio "content" $card-content-ratio / auto;
        }
      }
    }
  }
}

@include layer(theme) {
  #{defaults.$card-selector} {
    border-color: $card-border-color;
    background: $card-background;
    color: $card-color;
  }
}

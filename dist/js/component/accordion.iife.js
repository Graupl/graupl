var Accordion=function(){"use strict";var k=Object.defineProperty;var $=(h,e,m)=>e in h?k(h,e,{enumerable:!0,configurable:!0,writable:!0,value:m}):h[e]=m;var r=(h,e,m)=>$(h,typeof e!="symbol"?e+"":e,m);function h(i,t){try{if(typeof t!="object"){const s=typeof t;throw new TypeError(`Elements given to isValidInstance() must be inside of an object. "${s}" given.`)}for(const s in t)if(!(t[s]instanceof i)){const o=typeof t[s];throw new TypeError(`${s} must be an instance of ${i.name}. "${o}" given.`)}return{status:!0,error:null}}catch(s){return{status:!1,error:s}}}function e(i,t){try{if(typeof t!="object"){const s=typeof t;throw new TypeError(`Values given to isValidType() must be inside of an object. "${s}" given.`)}for(const s in t){const o=typeof t[s];if(o!==i)throw new TypeError(`${s} must be a ${i}. "${o}" given.`)}return{status:!0,error:null}}catch(s){return{status:!1,error:s}}}function m(i){try{if(typeof i!="object"){const t=typeof i;throw new TypeError(`Values given to isQuerySelector() must be inside of an object. "${t}" given.`)}for(const t in i)try{if(i[t]===null)throw new Error;document.querySelector(i[t])}catch{throw new TypeError(`${t} must be a valid query selector. "${i[t]}" given.`)}return{status:!0,error:null}}catch(t){return{status:!1,error:t}}}function c(i){try{if(typeof i!="object"||Array.isArray(i)){const t=typeof i;throw new TypeError(`Values given to isValidClassList() must be inside of an object. "${t}" given.`)}for(const t in i){const s=typeof i[t];if(s!=="string")if(Array.isArray(i[t]))i[t].forEach(o=>{if(typeof o!="string")throw new TypeError(`${t} must be a string or an array of strings. An array containing non-strings given.`)});else throw new TypeError(`${t} must be a string or an array of strings. "${s}" given.`);else{const o={};o[t]=i[t],m(o)}}return{status:!0,error:null}}catch(t){return{status:!1,error:t}}}function l(i,t){i===""||i.length===0||(typeof i=="string"?t.classList.add(i):t.classList.add(...i))}function d(i,t){i===""||i.length===0||(typeof i=="string"?t.classList.remove(i):t.classList.remove(...i))}class g{constructor({accordionItemElement:t,controllerElement:s=null,showClass:o="show",hideClass:n="hide",transitionClass:a="transitioning",transitionTimer:f=150,isHidden:p=!1,initialize:_=!1,optionalKeySupport:C=!1}){r(this,"_dom",{accordionItem:null,controller:null});r(this,"_hidden",!1);r(this,"_showClass","");r(this,"_hideClass","");r(this,"_transitionClass","");r(this,"_transitionTimer",150);r(this,"_optionalKeySupport",!1);r(this,"_showEvent",new CustomEvent("grauplAccordionItemShow",{bubbles:!0,detail:{accordionItem:this}}));r(this,"_hideEvent",new CustomEvent("grauplAccordionItemHide",{bubbles:!0,detail:{accordionItem:this}}));r(this,"_errors",[]);this._dom={accordionItem:null,controller:null},this._dom.accordionItem=t,this._dom.controller=s,this._showClass=o,this._hideClass=n,this._transitionClass=a,this._transitionTimer=f,this._hidden=p,this._optionalKeySupport=C,_&&this.initialize()}initialize(){try{if(!this._validate())throw new Error(`Graupl Accordion item: cannot initialize accordion item. The following errors have been found:
 - ${this.errors.join(`
 - `)}`)}catch(t){console.error(t)}}get dom(){return this._dom}get isHidden(){return this._hidden}get showClass(){return this._showClass}get hideClass(){return this._hideClass}get transitionClass(){return this._transitionClass}get transitionTimer(){return this._transitionTimer}get optionalKeySupport(){return this._optionalKeySupport}get errors(){return this._errors}set isHidden(t){e("boolean",{isHidden:t}),this._hidden!==t&&(this._hidden=t)}set showClass(t){c({showClass:t}),this._showClass!==t&&(this._showClass=t)}set hideClass(t){c({hideClass:t}),this._hideClass!==t&&(this._hideClass=t)}set transitionClass(t){c({transitionClass:t}),this._transitionClass!==t&&(this._transitionClass=t)}set transitionTimer(t){e("number",{transitionTimer:t}),this._transitionTimer!==t&&(this._transitionTimer=t)}set optionalKeySupport(t){e("boolean",{optionalKeySupport:t}),this._optionalKeySupport!==t&&(this._optionalKeySupport=t)}toggle(){this._hidden?this.show():this.hide()}_validate(){let t=!0;const s=e("boolean",{isHidden:this._hidden});s.status||(this._errors.push(s.error.message),t=!1);const o=e("number",{transitionTimer:this._transitionTimer});o.status||(this._errors.push(o.error.message),t=!1);const n=e("boolean",{optionalKeySupport:this._optionalKeySupport});n.status||(this._errors.push(n.error.message),t=!1);const a=c({showClass:this._showClass,hideClass:this._hideClass,transitionClass:this._transitionClass});return a.status||(this._errors.push(a.error.message),t=!1),t}show(t=!0){this._hidden&&(this.transitionClass!==""?(l(this.transitionClass,this.dom.accordionItem),requestAnimationFrame(()=>{this.hideClass!==""&&d(this.hideClass,this.dom.accordionItem),requestAnimationFrame(()=>{this.showClass!==""&&l(this.showClass,this.dom.accordionItem),requestAnimationFrame(()=>{d(this.transitionClass,this.dom.accordionItem)})})})):(this.showClass!==""&&l(this.showClass,this.dom.accordionItem),this.hideClass!==""&&d(this.hideClass,this.dom.accordionItem)),this._hidden=!1,this.dom.controller.setAttribute("aria-expanded","true"),t&&this.dom.accordionItem.dispatchEvent(this._showEvent))}hide(t=!0){this._hidden||(this.transitionClass!==""?(l(this.transitionClass,this.dom.accordionItem),requestAnimationFrame(()=>{this.showClass!==""&&d(this.showClass,this.dom.accordionItem),requestAnimationFrame(()=>{this.transitionTimer>0?setTimeout(()=>{this.hideClass!==""&&l(this.hideClass,this.dom.accordionItem),requestAnimationFrame(()=>{d(this.transitionClass,this.dom.accordionItem)})},this.transitionTimer):(this.hideClass!==""&&l(this.hideClass,this.dom.accordionItem),requestAnimationFrame(()=>{d(this.transitionClass,this.dom.accordionItem)}))})})):(this.hideClass!==""&&l(this.hideClass,this.dom.accordionItem),this.showClass!==""&&d(this.showClass,this.dom.accordionItem)),this.dom.controller.setAttribute("aria-expanded","false"),this._hidden=!0,t&&this.dom.accordionItem.dispatchEvent(this._hideEvent))}focus(){this.dom.controller.focus()}blur(){this.dom.controller.focus()}}function y(i){try{const t=i.key||i.keyCode,s={Enter:t==="Enter"||t===13,Space:t===" "||t==="Spacebar"||t===32,Escape:t==="Escape"||t==="Esc"||t===27,ArrowUp:t==="ArrowUp"||t==="Up"||t===38,ArrowRight:t==="ArrowRight"||t==="Right"||t===39,ArrowDown:t==="ArrowDown"||t==="Down"||t===40,ArrowLeft:t==="ArrowLeft"||t==="Left"||t===37,Home:t==="Home"||t===36,End:t==="End"||t===35,Tab:t==="Tab"||t===9};return Object.keys(s).find(o=>s[o]===!0)||""}catch{return""}}function u(i){i.preventDefault(),i.stopPropagation()}class w{constructor({accordionElement:t,accordionItemSelector:s=".accordion-item",accordionItemToggleSelector:o=".accordion-item-toggle",openClass:n="show",closeClass:a="hide",transitionClass:f="transitioning",transitionDuration:p=250,openDuration:_=-1,closeDuration:C=-1,optionalKeySupport:E=!1,allowMultipleExpand:b=!0,allowNoExpand:I=!0,initialize:T=!1,prefix:A="am-"}){r(this,"_dom",{accordion:null,accordionItems:[],accordionItemToggles:[]});r(this,"_domLock",["accordion"]);r(this,"_selectors",{accordionItems:"",accordionItemToggles:""});r(this,"_elements",{accordionItems:[]});r(this,"_openClass","show");r(this,"_closeClass","hide");r(this,"_transitionClass","transitioning");r(this,"_transitionDuration",250);r(this,"_openDuration",-1);r(this,"_closeDuration",-1);r(this,"_optionalKeySupport",!0);r(this,"_allowMultipleExpand",!0);r(this,"_allowNoExpand",!0);r(this,"_currentChild",0);r(this,"_errors",[]);this._dom.accordion=t,this._selectors.accordionItems=s,this._selectors.accordionItemToggles=o,this._openClass=n||"",this._closeClass=a||"",this._transitionClass=f||"",this._transitionDuration=p,this._openDuration=_,this._closeDuration=C,this._optionalKeySupport=E,this._allowMultipleExpand=b,this._allowNoExpand=I,this._prefix=A||"",T&&this.initialize()}get openClass(){return this._openClass}get closeClass(){return this._closeClass}get transitionClass(){return this._transitionClass}get currentChild(){return this._currentChild}get dom(){return this._dom}get elements(){return this._elements}get selectors(){return this._selectors}get transitionTimer(){return this._transitionTimer}get optionalKeySupport(){return this._optionalKeySupport}get errors(){return this._errors}set openClass(t){c({openClass:t}),this._openClass!==t&&(this._openClass=t)}set closeClass(t){c({closeClass:t}),this._closeClass!==t&&(this._closeClass=t)}set transitionClass(t){c({transitionClass:t}),this._transitionClass!==t&&(this._transitionClass=t)}set transitionTimer(t){e("number",{value:t}),t>=0&&this._transitionTimer!==t&&(this._transitionTimer=t)}set currentChild(t){e("number",{value:t}),this._currentChild!==t&&t>=0&&t<this._accordionItems.length&&(this._currentChild=t)}set accordionItems(t){e("object",{value:t}),t!=null&&t.isArray()&&t.every(s=>s instanceof g)&&(this._accordionItems=t)}initialize(){try{if(!this._validate())throw new Error(`Graupl Accordion: cannot initialize accordion. The following errors have been found:
 - ${this.errors.join(`
 - `)}`);this._setDOMElements(),this._createChildElements(),this._handleFocus(),this._handleClick(),this._handleKeydown(),this._handleKeyup()}catch(t){console.error(t)}}_setDOMElementType(t,s=this.dom.accordion,o=!0,n=!1){if(typeof this.selectors[t]=="string"){if(this._domLock.includes(t))throw new Error(`Graupl ${this.contructor.name}: "${t}" element cannot be set through _setDOMElementType.`);s!==this.dom.accordion&&h(HTMLElement,{base:s});const f=Array.from(s.querySelectorAll(this.selectors[t])).filter(p=>n?p.parentElement===s:!0);o?this._dom[t]=f:this._dom[t]=[...this._dom[t],...f]}else throw new Error(`Graupl ${this.contructor.name}: "${t}" is not a valid element type.`)}_resetDOMElementType(t){if(typeof this.selectors[t]=="string"){if(this._domLock.includes(t))throw new Error(`Graupl ${this.contructor.name}: "${t}" element cannot be reset through _resetDOMElementType.`);Array.isArray(this._dom[t])?this._dom[t]=[]:this._dom[t]=null}else throw new Error(`Graupl ${this.contructor.name}: "${t}" is not a valid element type.`)}_setDOMElements(){this._setDOMElementType("accordionItems"),this._resetDOMElementType("accordionItemToggles"),this.dom.accordionItems.forEach(t=>{this._setDOMElementType("accordionItemToggles",t,!1)})}_createChildElements(){this.dom.accordionItems.forEach(t=>{console.log(t)})}_validate(){return!0}_handleFocus(){this.elements.accordionItems.forEach((t,s)=>{t.dom.toggle.addEventListener("focus",()=>{this.currentChild=s})})}_handleClick(){this.elements.accordionItems.forEach((t,s)=>{t.dom.toggle.addEventListener("pointerup",()=>{this.currentChild=s,t.toggle()})})}_handleKeydown(){this.dom.accordionItemToggles.forEach(t=>{t.addEventListener("keydown",s=>{const o=y(s);(["Space","Enter"].includes(o)||this.optionalKeySupport&&["ArrowDown","ArrowUp","Home","End"].includes(o))&&u(s)})})}_handleKeyup(){this.dom.accordionItemToggles.forEach(t=>{t.addEventListener("keyup",s=>{const o=y(s);switch(console.log(s,o),o){case"Space":case"Enter":u(s),this.currentAccordionItem.toggle();break;case"Home":u(s),this.focusFirstChild();break;case"End":u(s),this.focusLastChild();break;case"ArrowDown":u(s),this.focusNextChild();break;case"ArrowUp":u(s),this.focusPreviousChild();break}})})}_setTransitionDurations(){this.dom.accordion.style.setProperty(`--${this.prefix}accordion-transition-duration`,`${this.transitionDuration}ms`),this.dom.accordion.style.setProperty(`--${this.prefix}accordion-open-transition-duration`,`${this.openDuration}ms`),this.dom.accordion.style.setProperty(`--${this.prefix}accordion-close-transition-duration`,`${this.closeDuration}ms`)}focusCurrentChild(){this.currentChild!==-1&&this.currentAccordionItem.focus()}focusChild(t){this.blurCurrentChild(),this.currentChild=t,this.focusCurrentChild()}focusFirstChild(){this.focusChild(0)}focusLastChild(){this.focusChild(this.elements.accordionItems.length-1)}focusNextChild(){this.currentChild<this.elements.accordionItems.length-1?this.focusChild(this.currentChild+1):this.focusCurrentChild()}focusPreviousChild(){this.currentChild>0?this.focusChild(this.currentChild-1):this.focusCurrentChild()}blurCurrentChild(){this.currentChild!==-1&&this.currentAccordionItem.blur()}}return w}();

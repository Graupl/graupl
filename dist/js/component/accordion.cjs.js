"use strict";var k=Object.defineProperty;var T=(i,t,e)=>t in i?k(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var o=(i,t,e)=>T(i,typeof t!="symbol"?t+"":t,e);function $(i,t){try{if(typeof t!="object"){const e=typeof t;throw new TypeError(`Elements given to isValidInstance() must be inside of an object. "${e}" given.`)}for(const e in t)if(!(t[e]instanceof i)){const s=typeof t[e];throw new TypeError(`${e} must be an instance of ${i.name}. "${s}" given.`)}return{status:!0,error:null}}catch(e){return{status:!1,error:e}}}function l(i,t){try{if(typeof t!="object"){const e=typeof t;throw new TypeError(`Values given to isValidType() must be inside of an object. "${e}" given.`)}for(const e in t){const s=typeof t[e];if(s!==i)throw new TypeError(`${e} must be a ${i}. "${s}" given.`)}return{status:!0,error:null}}catch(e){return{status:!1,error:e}}}function D(i){try{if(typeof i!="object"){const t=typeof i;throw new TypeError(`Values given to isQuerySelector() must be inside of an object. "${t}" given.`)}for(const t in i)try{if(i[t]===null)throw new Error;document.querySelector(i[t])}catch{throw new TypeError(`${t} must be a valid query selector. "${i[t]}" given.`)}return{status:!0,error:null}}catch(t){return{status:!1,error:t}}}function u(i){try{if(typeof i!="object"||Array.isArray(i)){const t=typeof i;throw new TypeError(`Values given to isValidClassList() must be inside of an object. "${t}" given.`)}for(const t in i){const e=typeof i[t];if(e!=="string")if(Array.isArray(i[t]))i[t].forEach(s=>{if(typeof s!="string")throw new TypeError(`${t} must be a string or an array of strings. An array containing non-strings given.`)});else throw new TypeError(`${t} must be a string or an array of strings. "${e}" given.`);else{const s={};s[t]=i[t],D(s)}}return{status:!0,error:null}}catch(t){return{status:!1,error:t}}}function h(i,t){i===""||i.length===0||(typeof i=="string"?t.classList.add(i):t.classList.add(...i))}function a(i,t){i===""||i.length===0||(typeof i=="string"?t.classList.remove(i):t.classList.remove(...i))}class f{constructor({accordionItemElement:t,accordionItemToggleElement:e,accordionItemContentElement:s,parentAccordion:r=null}){o(this,"_dom",{item:null,toggle:null,content:null});o(this,"_elements",{parentAccordion:null});o(this,"_open",!1);o(this,"_showEvent",new CustomEvent("grauplAccordionItemShow",{bubbles:!0,detail:{item:this}}));o(this,"_hideEvent",new CustomEvent("grauplAccordionItemHide",{bubbles:!0,detail:{item:this}}));this._dom.item=t,this._dom.toggle=e,this._dom.content=s,this._elements.parentAccordion=r}initialize(){this._setIds(),this._setAriaAttributes(),this.dom.toggle.getAttribute("aria-expanded")==="true"?this.show(!1):this.hide(!1)}get dom(){return this._dom}get elements(){return this._elements}get isOpen(){return this._open}set isOpen(t){l("boolean",{value:t}),this._open!==t&&(this._open=t)}_setIds(){}_setAriaAttributes(){}show(t=!0){if(this._open)return;const{closeClass:e,openClass:s,transitionClass:r,openDuration:n}=this.elements.parentAccordion;this.dom.toggle.setAttribute("aria-expanded","true"),r!==""?(h(r,this.dom.item),requestAnimationFrame(()=>{a(e,this.dom.item),this.dom.content.style.height="0px",requestAnimationFrame(()=>{h(s,this.dom.item),this.dom.content.style.height=`${this.dom.content.scrollHeight}px`,requestAnimationFrame(()=>{setTimeout(()=>{a(r,this.dom.item),this.dom.content.style.height=""},n)})})})):(h(s,this.dom.item),a(e,this.dom.item)),this._open=!0,t&&this.dom.item.dispatchEvent(this._showEvent)}hide(t=!0){if(!this._open)return;const{closeClass:e,openClass:s,transitionClass:r,closeDuration:n}=this.elements.parentAccordion;this.dom.toggle.setAttribute("aria-expanded","false"),r!==""?(h(r,this.dom.item),this.dom.content.style.height=`${this.dom.content.getBoundingClientRect().height}px`,requestAnimationFrame(()=>{a(s,this.dom.item),this.dom.content.style.height="0px",requestAnimationFrame(()=>{h(e,this.dom.item),requestAnimationFrame(()=>{setTimeout(()=>{a(r,this.dom.item),this.dom.content.style.height=""})},n)})})):(h(e,this.dom.item),a(s,this.dom.item)),this._open=!1,t&&this.dom.item.dispatchEvent(this._hideEvent)}toggle(){this.isOpen?this.hide():this.show()}focus(){this.dom.toggle.focus()}blur(){this.dom.toggle.blur()}}function p(i){try{const t=i.key||i.keyCode,e={Enter:t==="Enter"||t===13,Space:t===" "||t==="Spacebar"||t===32,Escape:t==="Escape"||t==="Esc"||t===27,ArrowUp:t==="ArrowUp"||t==="Up"||t===38,ArrowRight:t==="ArrowRight"||t==="Right"||t===39,ArrowDown:t==="ArrowDown"||t==="Down"||t===40,ArrowLeft:t==="ArrowLeft"||t==="Left"||t===37,Home:t==="Home"||t===36,End:t==="End"||t===35,Tab:t==="Tab"||t===9};return Object.keys(e).find(s=>e[s]===!0)||""}catch{return""}}function c(i){i.preventDefault(),i.stopPropagation()}class x{constructor({accordionElement:t,accordionItemSelector:e=".accordion-item",accordionItemToggleSelector:s=".accordion-item-toggle",accordionItemContentSelector:r=".accordion-item-content",openClass:n="show",closeClass:d="hide",transitionClass:m="transitioning",transitionDuration:g=250,openDuration:_=-1,closeDuration:y=-1,optionalKeySupport:C=!1,allowMultipleExpand:E=!0,allowNoExpand:w=!0,key:A=null,initialize:b=!1,prefix:I="am-"}){o(this,"_dom",{accordion:null,accordionItems:[],accordionItemToggles:[],accordionItemContents:[]});o(this,"_domLock",["accordion"]);o(this,"_selectors",{accordionItems:"",accordionItemToggles:"",accordionItemContents:""});o(this,"_elements",{accordionItems:[]});o(this,"_openClass","show");o(this,"_closeClass","hide");o(this,"_transitionClass","transitioning");o(this,"_transitionDuration",250);o(this,"_openDuration",-1);o(this,"_closeDuration",-1);o(this,"_optionalKeySupport",!0);o(this,"_allowMultipleExpand",!0);o(this,"_allowNoExpand",!0);o(this,"_currentChild",0);o(this,"_prefix","graupl-");o(this,"_key","");o(this,"_errors",[]);this._dom.accordion=t,this._selectors.accordionItems=e,this._selectors.accordionItemToggles=s,this._selectors.accordionItemContents=r,this._openClass=n||"",this._closeClass=d||"",this._transitionClass=m||"",this._transitionDuration=g,this._openDuration=_,this._closeDuration=y,this._optionalKeySupport=C,this._allowMultipleExpand=E,this._allowNoExpand=w,this._prefix=I||"",this._key=A||"",b&&this.initialize()}get openClass(){return this._openClass}get closeClass(){return this._closeClass}get transitionClass(){return this._transitionClass}get currentChild(){return this._currentChild}get dom(){return this._dom}get elements(){return this._elements}get selectors(){return this._selectors}get transitionTimer(){return this._transitionTimer}get optionalKeySupport(){return this._optionalKeySupport}get currentAccordionItem(){return this.elements.accordionItems[this.currentChild]}get prefix(){return this._prefix}get key(){return this._key}get errors(){return this._errors}set openClass(t){u({openClass:t}),this._openClass!==t&&(this._openClass=t)}set closeClass(t){u({closeClass:t}),this._closeClass!==t&&(this._closeClass=t)}set transitionClass(t){u({transitionClass:t}),this._transitionClass!==t&&(this._transitionClass=t)}set transitionTimer(t){l("number",{value:t}),t>=0&&this._transitionTimer!==t&&(this._transitionTimer=t)}set currentChild(t){l("number",{value:t}),this._currentChild!==t&&t>=0&&t<this.elements.accordionItems.length&&(this._currentChild=t)}set accordionItems(t){l("object",{value:t}),t!=null&&t.isArray()&&t.every(e=>e instanceof f)&&(this._accordionItems=t)}set prefix(t){l("string",{value:t}),this._prefix!==t&&(this._prefix=t)}set key(t){l("string",{value:t}),this._key!==t&&(this._key=t)}initialize(){try{if(!this._validate())throw new Error(`Graupl Accordion: cannot initialize accordion. The following errors have been found:
 - ${this.errors.join(`
 - `)}`);this._generateKey(),this._setDOMElements(),this._createChildElements(),this._handleFocus(),this._handleClick(),this._handleKeydown(),this._handleKeyup()}catch(t){console.error(t)}}_setDOMElementType(t,e=this.dom.accordion,s=!0,r=!1){if(typeof this.selectors[t]=="string"){if(this._domLock.includes(t))throw new Error(`Graupl ${this.contructor.name}: "${t}" element cannot be set through _setDOMElementType.`);e!==this.dom.accordion&&$(HTMLElement,{base:e});const d=Array.from(e.querySelectorAll(this.selectors[t])).filter(m=>r?m.parentElement===e:!0);s?this._dom[t]=d:this._dom[t]=[...this._dom[t],...d]}else throw new Error(`Graupl ${this.contructor.name}: "${t}" is not a valid element type.`)}_resetDOMElementType(t){if(typeof this.selectors[t]=="string"){if(this._domLock.includes(t))throw new Error(`Graupl ${this.contructor.name}: "${t}" element cannot be reset through _resetDOMElementType.`);Array.isArray(this._dom[t])?this._dom[t]=[]:this._dom[t]=null}else throw new Error(`Graupl ${this.contructor.name}: "${t}" is not a valid element type.`)}_setDOMElements(){this._setDOMElementType("accordionItems"),this._resetDOMElementType("accordionItemToggles"),this.dom.accordionItems.forEach(t=>{this._setDOMElementType("accordionItemToggles",t,!1),this._setDOMElementType("accordionItemContents",t,!1)})}_generateKey(t=!1){(this.key===""||t)&&(this.key=Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,10))}_createChildElements(){this.dom.accordionItems.forEach((t,e)=>{const s=new f({accordionItemElement:t,accordionItemToggleElement:this.dom.accordionItemToggles[e],accordionItemContentElement:this.dom.accordionItemContents[e],parentAccordion:this});s.initialize(),this.elements.accordionItems.push(s)})}_validate(){return!0}_handleFocus(){this.elements.accordionItems.forEach((t,e)=>{t.dom.toggle.addEventListener("focus",()=>{this.currentChild=e})})}_handleClick(){this.elements.accordionItems.forEach((t,e)=>{t.dom.toggle.addEventListener("pointerup",()=>{this.currentChild=e,t.toggle()})})}_handleKeydown(){this.dom.accordionItemToggles.forEach(t=>{t.addEventListener("keydown",e=>{const s=p(e);(["Space","Enter"].includes(s)||this.optionalKeySupport&&["ArrowDown","ArrowUp","Home","End"].includes(s))&&c(e)})})}_handleKeyup(){this.dom.accordionItemToggles.forEach(t=>{t.addEventListener("keyup",e=>{switch(p(e)){case"Space":case"Enter":c(e),this.currentAccordionItem.toggle();break;case"Home":c(e),this.focusFirstChild();break;case"End":c(e),this.focusLastChild();break;case"ArrowDown":c(e),this.focusNextChild();break;case"ArrowUp":c(e),this.focusPreviousChild();break}})})}_setTransitionDurations(){this.dom.accordion.style.setProperty(`--${this.prefix}accordion-transition-duration`,`${this.transitionDuration}ms`),this.dom.accordion.style.setProperty(`--${this.prefix}accordion-open-transition-duration`,`${this.openDuration}ms`),this.dom.accordion.style.setProperty(`--${this.prefix}accordion-close-transition-duration`,`${this.closeDuration}ms`)}focusCurrentChild(){this.currentChild!==-1&&this.currentAccordionItem.focus()}focusChild(t){this.blurCurrentChild(),this.currentChild=t,this.focusCurrentChild()}focusFirstChild(){this.focusChild(0)}focusLastChild(){this.focusChild(this.elements.accordionItems.length-1)}focusNextChild(){this.currentChild<this.elements.accordionItems.length-1?this.focusChild(this.currentChild+1):this.focusCurrentChild()}focusPreviousChild(){this.currentChild>0?this.focusChild(this.currentChild-1):this.focusCurrentChild()}blurCurrentChild(){this.currentChild!==-1&&this.currentAccordionItem.blur()}}module.exports=x;
